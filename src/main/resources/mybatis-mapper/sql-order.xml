<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.anesi.mapper.OrderMapper">
	<!-- 쿠폰 검색 -->
	<select id="selectCouponList" parameterType="hashmap" resultType="com.example.anesi.model.Order">
		SELECT *
		FROM t3_tbl_user_coupon
		WHERE USER_NO = #{userNo}
	</select>
	
	<insert id="insertAddr" parameterType="hashmap" >
		INSERT INTO t3_tbl_user_address(USER_NO, ZIPCODE, ADDR, ADDR2, ADDR_KIND, DEFAULT_YN)
		VALUES(#{userNo}, #{zip}, #{addr1}, #{addr2}, #{addrName}, #{addrDefault})
	</insert>
	
	<select id="selectAddrList" parameterType="hashmap" resultType="com.example.anesi.model.UserAddress">
		SELECT *
		FROM t3_tbl_user_address
		WHERE USER_NO = #{userNo}
	</select>
	
	<select id="selectAddr" parameterType="hashmap" resultType="com.example.anesi.model.UserAddress">
		SELECT *
		FROM t3_tbl_user_address
		WHERE USER_NO = #{userNo} AND ZIPCODE = #{zip} AND ADDR_KIND = #{addrName}
	</select>
	
	<select id="selectOptionInfo" parameterType="hashmap" resultType="com.example.anesi.model.ProductOption">
		SELECT *
		FROM t3_tbl_product_option
		WHERE OPTION_NO = #{optionNo}
	</select>
	<insert id="insertOrder" parameterType="hashmap">
    INSERT INTO t3_tbl_user_order (
        PRODUCT_NO, OPTION_NO, USER_NO, ADDR_NO, DELIVERY_SIT, REQUEST,
        ORDER_PRICE, ORDER_NAME, ORDER_EMAIL, ORDER_PHONE,
        RECEIPT_NAME, RECEIPT_PHONE, CNT
    )
    VALUES (
        #{productNo}, #{optionNo}, #{userNo}, #{addrNo}, '1', #{request},
        #{orderPrice}, #{orderName}, #{orderEmail}, #{orderPhone},
        #{receiptName}, #{receiptPhone}, #{cnt}
    )
</insert>
</mapper>