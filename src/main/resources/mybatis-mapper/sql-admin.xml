<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.anesi.mapper.AdminMapper">
	<!-- 상품 리스트 조회 -->
	<select id="adminProductList" parameterType="hashmap" resultType="com.example.anesi.model.Product">
		SELECT p.*, o.STOCK, CATEGORY_NAME
		FROM t3_tbl_product p
		LEFT JOIN (
			SELECT PRODUCT_NO, SUM(PRODUCT_STOCK) STOCK
			FROM t3_tbl_product_option
			GROUP BY PRODUCT_NO
		) o ON p.PRODUCT_NO = o.PRODUCT_NO
		INNER JOIN t3_tbl_product_category c
			ON p.CATEGORY_NO = c.CATEGORY_NO
	</select>
</mapper>